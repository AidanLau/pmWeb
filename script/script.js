var userID = 1074413921;

var subData = [
    { 
        "Type": "CSD", 
        "Submission No": ["GECCL/3508/D/18427/C", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126097698&USERID=1074413921"], 
        "Description": ["CR97N(3T2 422)", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3508/10 Contractor Submission SQ SN/01 Submission/Drawing - AS CSD/18427 CR97N/C"],
        "Status": "", "Target": "04 Jul 24" 
    },
    { 
        "Type": "CSD", 
        "Submission No": ["GECCL/3508/D/20763/B", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126097706&USERID=1074413921"], 
        "Description": ["CR93N (3T2 178)", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3508/10 Contractor Submission SQ SN/01 Submission/Drawing - AS CSD/20763 CR93N/B"],
        "Status": "", "Target": "04 Jul 24" 
    },
    { 
        "Type": "CSD", 
        "Submission No": ["GECCL/3508/D/19708/C", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126099700&USERID=1074413921"], 
        "Description": ["CTR231 (3T2 204)", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3508/10 Contractor Submission SQ SN/01 Submission/Drawing - AS CSD/19708 CT231/C"],
        "Status": "", "Target": "04 Jul 24" 
    },
    { 
        "Type": "CSD", 
        "Submission No": ["GECCL/3508/D/19380/B", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126101206&USERID=1074413921"], 
        "Description": ["CTR232 (3T2 205)", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3508/10 Contractor Submission SQ SN/01 Submission/Drawing - AS CSD/19380 CT232/B"],
        "Status": "", "Target": "04 Jul 24" 
    },
    { 
        "Type": "C3408", 
        "Submission No": ["BCJV-3408-M-02780D", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1125911198&USERID=1074413921"], 
        "Description": ["(JSSC) - A-SCADA and RSMS Servers / EMS Servers(ASCADA/2511-JSSC)(Apron) [AS]", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3408/10 Contractor Submission SQ SN/Submission/_Airfield/Material/ASCADA/M-02780 SCADA RSMS EMS Server (JSSC)/D"],
        "Status": "", "Target": "18 Jun 24" 
    },
    { 
        "Type": "C3508", 
        "Submission No": ["BCJV-3408-D-02141C", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126024693&USERID=1074413921"], 
        "Description": ["ASCADA System I/O Panle Related Drawing[AS]", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3408/10 Contractor Submission SQ SN/Submission/_Airfield/Drawing/ASCADA/D02141 IO Panel Related/C"],
        "Status": "", "Target": "27 Jun 24" 
    },
    { 
        "Type": "C3408", 
        "Submission No": ["BCJV-3408-O-02629A", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126024860&USERID=1074413921"], 
        "Description": ["Site Acceptance Test Plan of Central Control and Monitoring System (NAT-CCMS) [AS]", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3408/10 Contractor Submission SQ SN/Submission/General Submission/O-02629 NAT CCMS SAT/A"],
        "Status": "", "Target": "27 Jun 24" 
    },
    { 
        "Type": "C3802", 
        "Submission No": ["GECCL/3802/B/001930/G", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126059538&USERID=1074413921"], 
        "Description": ["Material Submission for GBMS Control Cable and Patch Cord Cable", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3802/10 Contractor Submission SQ SN/01 Submission/Materials/GBMS/B001930 GBMS Control Cable & Patch Cord/G"],
        "Status": "", "Target": "08 Jul 24" 
    },
    { 
        "Type": "C3508", 
        "Submission No": ["GECCL/3508/O/28169/A", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126089054&USERID=1074413921"], 
        "Description": ["GBMS) Factory Acceptance Test (FAT) Report (Batch 2) (GCL-GEN-EM-AS-1011)", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3508/10 Contractor Submission SQ SN/01 Submission/General Submission/GBMS MBMS CCMS SCADA/28169 GBMS FAT Report batch2/A"],
        "Status": "", "Target": "03 Jul 24" 
    },
    { 
        "Type": "C3508", 
        "Submission No": ["GECCL/3508/O/28170/A", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126089231&USERID=1074413921"], 
        "Description": ["(GBMS) Development Testing Platform (DTP) Report (GCL-GEN-EM-AS-1012)", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3508/10 Contractor Submission SQ SN/01 Submission/General Submission/GBMS MBMS CCMS SCADA/28170 GBMS DTP Report/A"],
        "Status": "", "Target": "03 Jul 24" 
    },
    { 
        "Type": "C3508", 
        "Submission No": ["GECCL/3508/O/28171/A", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126089379&USERID=1074413921"], 
        "Description": ["(GBMS) Site Acceptance Test Plan and Procedure Submission (GCL-GEN-EM-AS-1013)", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3508/10 Contractor Submission SQ SN/01 Submission/General Submission/GBMS MBMS CCMS SCADA/28171 GBMS SAT Plan/A"],
        "Status": "", "Target": "03 Jul 24" 
    },
    { 
        "Type": "C3802", 
        "Submission No": ["GECCL/3802/B/009325/A", "https://asia2.aconex.com/Logon?Action=View&ENTITY=MAIL&ID=1126099438&USERID=1074413921"], 
        "Description": ["Drawing Submission for SCADA Panel Layout for Gatehouse A", 
                        "//hkairport/Share/PSU/Projects/aProject Implementation/Airport Systems/3802/10 Contractor Submission SQ SN/01 Submission/Drawing/SCADA_ALWS/B009325 - ASCADA Panel Layout for Gatehouse A/A"],
        "Status": "", "Target": "11 Jul 24" 
    },
    { 
        "Type": "", 
        "Submission No": ["", ""], 
        "Description": ["", 
                        ""],
        "Status": "", "Target": "" 
    }
];

// Tabel Configuration
$.extend($.fn.dataTable.defaults, {
    searching: true,
    ordering: false,
    paging: false,
    info: true,
    dom: 'Bfrtip',
});

// Submission dataTable
$('#subTable').dataTable({
    "data": subData,
    "columns": [
        { "data": "Type" },
        {
            "data": "Submission No",
            "render": function (data, type, row, meta) {
                if (type === 'display') {
                    data = '<a target="_blank" href="' + data[1] + '">' + data[0] + '</a>';
                }

                return data;
            }
        },
        {
            "data": "Description",
            "render": function (data, type, row, meta) {
                if (type === 'display') {
                    data = '<a target="_blank" href="' + data[1] + '">' + data[0] + '</a>';
                }
                return data;
            }
        },
        { "data": "Status" },
        {
            "data": "Target",
            "render": function (data, type, row, meta) {
                if (new Date(data) < new Date()) {
                    data = '<a style="color:red">' + data + '</a>';
                }
                return data;
            }
        }
    ]
});

$(document).ready(function() {
    $('#subTable').DataTable();
//    $('#commsTable').DataTable();
});

var tableName = "subTable"
// Auto update table width
// refresh the table
var tableWidth = 0; var tableWidthCalc;

function calculateTableWidth(tableName) {
    var table = document.getElementById(tableName);
    tableWidthCalc = innerWidth - table.getBoundingClientRect().left - table.getBoundingClientRect().width;
}

// resize table if needed
function resizeTable(tableName) {
    var table = document.getElementById(tableName);
    if (tableWidthCalc < innerWidth) {
        table.style.width = "100%";
    } else if (tableWidthCalc > innerWidth) {
        table.style.width = (tableWidthCalc - innerWidth) + "px";
    }
}
// calculate table width on initial load
calculateTableWidth(tableName);

// trigger resize event on page load
resizeTable(tableName);

// calculate table width on window resize event
addEventListener("resize", function (event) {
     console.log("Window resized");
     calculateTableWidth();}, false);
